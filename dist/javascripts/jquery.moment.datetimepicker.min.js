!function(a){"function"==typeof define&&define.amd?define(["jquery","moment","jquery.mousewheel"],a):"object"==typeof exports?module.exports=a:a(jQuery,moment)}(function(a,b){"use strict";Date.prototype.dateFormat=function(a){return b(this).format(a)},Date.parseDate=function(a,c){return b(a,c).toDate()};var c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z,A,B,C,D,E,F,G,H,I,J,K,L,M,N,O,P,Q,R,S,T,U,V,W,X,Y,Z,$,_,ab,bb,cb,db,eb,fb,gb,hb,ib,jb,kb,lb,mb="YYYY/MM/DD HH:mm",nb="HH:mm",ob="YYYY/MM/DD",pb={months:"months",dayOfWeek:"weekdaysShort"},qb=function(a,c){return b[pb[c]]()},rb=function(a){a.dayOfWeekStart=b.localeData().firstDayOfWeek()},sb=function(a){a.mask===!0&&(a.mask=a.format.replace(/Y/g,"9").replace(/MM/g,"19").replace(/DD/g,"39").replace(/M/g,"19").replace(/D/g,"39").replace(/HH/g,"29").replace(/hh/g,"19").replace(/H/g,"29").replace(/h/g,"19").replace(/mm/g,"59").replace(/ss/g,"59").replace(/m/g,"59").replace(/s/g,"59"))},tb=function(a){c=a,d="keyup."+c+"ctrl",e="afterOpen."+c,f="blur."+c,g="changedatetime."+c,h="click."+c,i="close."+c,j="dblclick."+c,k="focusin."+c,l="generate."+c,m="keydown."+c,n="mousedown."+c,o="mouseup."+c,p="mousewheel."+c,q="open."+c,r="resize."+c,s="toggle."+c,t="xchange."+c,u="error_input."+c,v="select."+c,w="resize_scroll."+c+"_scroller",x="scroll_element."+c+"_scroller",y="mousedown."+c+"_scroller",z="mousemove."+c+"_scroller",A="mouseup."+c+"_scroller",B="resize_scroll."+c+"_scroller",C="scroll_element."+c+"_scroller",D="touchstart."+c+"_scroller",E="keydown."+c+"ctrl",F="keyup."+c+"ctrl",G=c+"_calendar",H=c+"_copyright",I=c+"_current",J=c+"_date",K=c+"_datepicker",L=c+"_datetime",M=c+"_datetimepicker",N=c+"_day_of_week",O=c+"_disabled",P=c+"_init_time",Q=c+"_inline",R=c+"_label",S=c+"_month",T=c+"_monthselect",U=c+"_monthpicker",V=c+"_next",W=c+"_noselect",X=c+"_option",Y=c+"_other_month",Z=c+"_prev",$=c+"_scrollbar",_=c+"_scroller",ab=c+"_scroller_box",bb=c+"_select",cb=c+"_showweeks",db=c+"_time",eb=c+"_time_box",fb=c+"_time_variant",gb=c+"_timepicker",hb=c+"_today",ib=c+"_today_button",jb=c+"_weekend",kb=c+"_year",lb=c+"_yearselect"};tb("xdsoft");var ub={i18n:pb,template:{datepicker:function(){return'<div class="'+K+' active"></div>'},month_picker:function(){return'<div class="'+U+'"><button type="button" class="'+Z+'"></button><button type="button" class="'+ib+'"></button><div class="'+R+" "+S+'"><span></span><i></i></div><div class="'+R+" "+kb+'"><span></span><i></i></div><button type="button" class="'+V+'"></button></div>'},calendar:function(){return'<div class="'+G+'"></div>'},timepicker:function(){return'<div class="'+gb+' active"><button type="button" class="'+Z+'"></button><div class="'+eb+'"></div><button type="button" class="'+V+'"></button></div>'},timebox:function(){return'<div class="'+fb+'"></div>'},monthselect:function(){return'<div class="'+bb+" "+T+'"><div></div></div>'},yearselect:function(){return'<div class="'+bb+" "+lb+'"><div></div></div>'}},value:"",lang:"en",format:mb,formatTime:nb,formatDate:ob,startDate:!1,step:60,monthChangeSpinner:!0,closeOnDateSelect:!1,closeOnWithoutClick:!0,closeOnInputClick:!0,timepicker:!0,datepicker:!0,weeks:!1,defaultTime:!1,defaultDate:!1,minDate:!1,maxDate:!1,minTime:!1,maxTime:!1,allowTimes:[],opened:!1,initTime:!0,inline:!1,theme:"",onSelectDate:function(){},onSelectTime:function(){},onChangeMonth:function(){},onChangeYear:function(){},onChangeDateTime:function(){},onShow:function(){},onClose:function(){},onGenerate:function(){},withoutCopyright:!0,inverseButton:!1,hours12:!1,next:V,prev:Z,dayOfWeekStart:0,parentID:"body",timeHeightInTimePicker:25,timepickerScrollbar:!0,todayButton:!0,defaultSelect:!0,scrollMonth:!0,scrollTime:!0,scrollInput:!0,lazyInit:!1,mask:!1,validateOnBlur:!0,allowBlank:!0,yearStart:1950,yearEnd:2050,style:"",id:"",fixed:!1,roundTime:"round",className:"",weekends:[],disabledDates:[],yearOffset:0,beforeShowDay:null,enterLikeTab:!0};Array.prototype.indexOf||(Array.prototype.indexOf=function(a,b){var c,d;for(c=b||0,d=this.length;d>c;c+=1)if(this[c]===a)return c;return-1}),Date.prototype.countDaysInMonth=function(){return new Date(this.getFullYear(),this.getMonth()+1,0).getDate()},a.fn.xdsoftScroller=function(b){return this.each(function(){var c,d,e,f,g,h=a(this),i=function(a){var b,c={x:0,y:0};return"touchstart"===a.type||"touchmove"===a.type||"touchend"===a.type||"touchcancel"===a.type?(b=a.originalEvent.touches[0]||a.originalEvent.changedTouches[0],c.x=b.clientX,c.y=b.clientY):("mousedown"===a.type||"mouseup"===a.type||"mousemove"===a.type||"mouseover"===a.type||"mouseout"===a.type||"mouseenter"===a.type||"mouseleave"===a.type)&&(c.x=a.clientX,c.y=a.clientY),c},j=100,k=!1,l=0,m=0,n=0,o=!1,p=0,q=function(){};return"hide"===b?void h.find("."+$).hide():(a(this).hasClass(ab)||(c=h.children().eq(0),d=h[0].clientHeight,e=c[0].offsetHeight,f=a('<div class="'+$+'"></div>'),g=a('<div class="'+_+'"></div>'),f.append(g),h.addClass(ab).append(f),q=function(a){var b=i(a).y-l+p;0>b&&(b=0),b+g[0].offsetHeight>n&&(b=n-g[0].offsetHeight),h.trigger(C,[j?b/j:0])},g.on([D,y].join(" "),function(c){d||h.trigger(B,[b]),l=i(c).y,p=parseInt(g.css("margin-top"),10),n=f[0].offsetHeight,"mousedown"===c.type?(document&&a(document.body).addClass(W),a([document.body,window]).on(A,function e(){a([document.body,window]).off(A,e).off(z,q).removeClass(W)}),a(document.body).on(z,q)):(o=!0,c.stopPropagation(),c.preventDefault())}).on("touchmove",function(a){o&&(a.preventDefault(),q(a))}).on("touchend touchcancel",function(){o=!1,p=0}),h.on(C,function(a,b){d||h.trigger(B,[b,!0]),b=b>1?1:0>b||isNaN(b)?0:b,g.css("margin-top",j*b),setTimeout(function(){c.css("marginTop",-parseInt((c[0].offsetHeight-d)*b,10))},10)}).on(B,function(a,b,i){var k,l;d=h[0].clientHeight,e=c[0].offsetHeight,k=d/e,l=k*f[0].offsetHeight,k>1?g.hide():(g.show(),g.css("height",parseInt(l>10?l:10,10)),j=f[0].offsetHeight-g[0].offsetHeight,i!==!0&&h.trigger(C,[b||Math.abs(parseInt(c.css("marginTop"),10))/(e-d)]))}),h.on("mousewheel",function(a){var b=Math.abs(parseInt(c.css("marginTop"),10));return b-=20*a.deltaY,0>b&&(b=0),h.trigger(C,[b/(e-d)]),a.stopPropagation(),!1}),h.on("touchstart",function(a){k=i(a),m=Math.abs(parseInt(c.css("marginTop"),10))}),h.on("touchmove",function(a){if(k){a.preventDefault();var b=i(a);h.trigger(C,[(m-(b.y-k.y))/(e-d)])}}),h.on("touchend touchcancel",function(){k=!1,m=0})),void h.trigger(B,[b]))})};var vb=function(){};a.fn.datetimepicker=function(b){a.fn.datetimepicker.setNamespace=vb;var d,w,x=48,y=57,z=96,A=105,B=17,D=46,G=13,H=27,K=8,U=37,$=38,_=39,ab=40,fb=9,gb=116,lb=65,mb=67,nb=86,ob=90,pb=89,tb=!1,wb=a.isPlainObject(b)||!b?a.extend(!0,{},ub,b):a.extend(!0,{},ub),xb=0,yb=function(a){a.on([q,k,n].join(" "),function b(){a.is(":disabled")||a.data(M)||(clearTimeout(xb),xb=setTimeout(function(){a.data(M)||d(a),a.off([q,k,n].join(" "),b).trigger(q)},100))})};return d=function(d){function w(){var a,b=!1;return wb.startDate?b=yb.strToDate(wb.startDate):(b=wb.value||(d&&d.val&&d.val()?d.val():""),b?b=yb.strToDateTime(b):wb.defaultDate&&(b=yb.strToDate(wb.defaultDate),wb.defaultTime&&(a=yb.strtotime(wb.defaultTime),b.setHours(a.getHours()),b.setMinutes(a.getMinutes())))),b&&yb.isValidDate(b)?zb.data("changed",!0):b="",b||0}var E,F,ub,vb,xb,yb,zb=a("<div "+(wb.id?'id="'+wb.id+'"':"")+" "+(wb.style?'style="'+wb.style+'"':"")+' class="'+M+" "+c+"_"+wb.theme+" "+W+" "+(wb.weeks?" "+cb:"")+wb.className+'"></div>'),Ab=a(Ab),Bb=a(wb.template.datepicker()),Cb=a(wb.template.month_picker()),Db=a(wb.template.calendar()),Eb=a(wb.template.timepicker()),Fb=Eb.find("."+eb).eq(0),Gb=a(wb.template.timebox()),Hb=a(wb.template.monthselect()),Ib=a(wb.template.yearselect()),Jb=!1,Kb=0,Lb=0;Cb.find("."+S+" span").after(Hb),Cb.find("."+kb+" span").after(Ib),Cb.find("."+S+",."+kb).on(n,function(b){var c,d,e=a(this).find("."+bb).eq(0),f=0,g=0,h=e.is(":visible");for(Cb.find("."+bb).hide(),yb.currentTime&&(f=yb.currentTime[a(this).hasClass(S)?"getMonth":"getFullYear"]()),e[h?"hide":"show"](),c=e.find("div."+X),d=0;d<c.length&&c.eq(d).data("value")!==f;d+=1)g+=c[0].offsetHeight;return e.xdsoftScroller(g/(e.children()[0].offsetHeight-e[0].clientHeight)),b.stopPropagation(),!1}),Cb.find("."+bb).xdsoftScroller().on(n,function(a){a.stopPropagation(),a.preventDefault()}).on(n,"."+X,function(){var b=yb.currentTime.getFullYear();yb&&yb.currentTime&&yb.currentTime[a(this).parent().parent().hasClass(T)?"setMonth":"setFullYear"](a(this).data("value")),a(this).parent().parent().hide(),zb.trigger(t),wb.onChangeMonth&&a.isFunction(wb.onChangeMonth)&&wb.onChangeMonth.call(zb,yb.currentTime,zb.data("input")),b!==yb.currentTime.getFullYear()&&a.isFunction(wb.onChangeYear)&&wb.onChangeYear.call(zb,yb.currentTime,zb.data("input"))}),zb.setOptions=function(b){if(wb=a.extend(!0,{},wb,b),b.allowTimes&&a.isArray(b.allowTimes)&&b.allowTimes.length&&(wb.allowTimes=a.extend(!0,[],b.allowTimes)),b.weekends&&a.isArray(b.weekends)&&b.weekends.length&&(wb.weekends=a.extend(!0,[],b.weekends)),b.disabledDates&&a.isArray(b.disabledDates)&&b.disabledDates.length&&(wb.disabledDates=a.extend(!0,[],b.disabledDates)),!wb.open&&!wb.opened||wb.inline||d.trigger(q),wb.inline&&(Jb=!0,zb.addClass(Q),d.after(zb).hide()),wb.inverseButton&&(wb.next=Z,wb.prev=V),wb.datepicker?Bb.addClass("active"):Bb.removeClass("active"),wb.timepicker?Eb.addClass("active"):Eb.removeClass("active"),wb.value&&(d&&d.val&&d.val(wb.value),yb.setCurrentTime(wb.value)),rb(wb),wb.timepickerScrollbar||Fb.xdsoftScroller("hide"),wb.minDate&&/^-(.*)$/.test(wb.minDate)&&(wb.minDate=yb.strToDateTime(wb.minDate).dateFormat(wb.formatDate)),wb.maxDate&&/^\+(.*)$/.test(wb.maxDate)&&(wb.maxDate=yb.strToDateTime(wb.maxDate).dateFormat(wb.formatDate)),Cb.find("."+ib).css("visibility",wb.todayButton?"visible":"hidden"),wb.mask){var c=function(a){try{if(document.selection&&document.selection.createRange){var b=document.selection.createRange();return b.getBookmark().charCodeAt(2)-2}if(a.setSelectionRange)return a.selectionStart}catch(c){return 0}},h=function(a,b){if(a="string"==typeof a||a instanceof String?document.getElementById(a):a,!a)return!1;if(a.createTextRange){var c=a.createTextRange();return c.collapse(!0),c.moveEnd("character",b),c.moveStart("character",b),c.select(),!0}return a.setSelectionRange?(a.setSelectionRange(b,b),!0):!1},i=function(a,b){var c=a.replace(/([\[\]\/\{\}\(\)\-\.\+]{1})/g,"\\$1").replace(/_/g,"{digit+}").replace(/([0-9]{1})/g,"{digit$1}").replace(/\{digit([0-9]{1})\}/g,"[0-$1_]{1}").replace(/\{digit[\+]\}/g,"[0-9_]{1}");return new RegExp(c).test(b)};d.off(m),sb(wb),"string"===a.type(wb.mask)&&(i(wb.mask,d.val())||d.val(wb.mask.replace(/[0-9]/g,"_")),d.on(m,function(b){var e,f,g=this.value,j=b.which;if(j>=x&&y>=j||j>=z&&A>=j||j===K||j===D){for(e=c(this),f=j!==K&&j!==D?String.fromCharCode(j>=z&&A>=j?j-x:j):"_",j!==K&&j!==D||!e||(e-=1,f="_");/[^0-9_]/.test(wb.mask.substr(e,1))&&e<wb.mask.length&&e>0;)e+=j===K||j===D?-1:1;if(g=g.substr(0,e)+f+g.substr(e+1),""===a.trim(g))g=wb.mask.replace(/[0-9]/g,"_");else if(e===wb.mask.length)return b.preventDefault(),!1;for(e+=j===K||j===D?0:1;/[^0-9_]/.test(wb.mask.substr(e,1))&&e<wb.mask.length&&e>0;)e+=j===K||j===D?-1:1;i(wb.mask,g)?(this.value=g,h(this,e)):""===a.trim(g)?this.value=wb.mask.replace(/[0-9]/g,"_"):d.trigger(u)}else if(-1!==[lb,mb,nb,ob,pb].indexOf(j)&&tb||-1!==[H,$,ab,U,_,gb,B,fb,G].indexOf(j))return!0;return b.preventDefault(),!1}))}wb.validateOnBlur&&d.off(f).on(f,function(){wb.allowBlank&&!a.trim(a(this).val()).length?(a(this).val(null),zb.data(L).empty()):Date.parseDate(a(this).val(),wb.format)?zb.data(L).setCurrentTime(a(this).val()):(a(this).val(yb.now().dateFormat(wb.format)),zb.data(L).setCurrentTime(a(this).val())),zb.trigger(g)}),wb.dayOfWeekStartPrev=0===wb.dayOfWeekStart?6:wb.dayOfWeekStart-1,zb.trigger(t).trigger(e)},zb.data("options",wb).on(n,function(a){return a.stopPropagation(),a.preventDefault(),Ib.hide(),Hb.hide(),!1}),Fb.append(Gb),Fb.xdsoftScroller(),zb.on(e,function(){Fb.xdsoftScroller()}),zb.append(Bb).append(Eb),wb.withoutCopyright!==!0&&zb.append(Ab),Bb.append(Cb).append(Db),a(wb.parentID).append(zb),E=function(){var b=this;b.now=function(a){var c,d,e=new Date;return!a&&wb.defaultDate&&(c=b.strToDate(wb.defaultDate),e.setFullYear(c.getFullYear()),e.setMonth(c.getMonth()),e.setDate(c.getDate())),wb.yearOffset&&e.setFullYear(e.getFullYear()+wb.yearOffset),!a&&wb.defaultTime&&(d=b.strtotime(wb.defaultTime),e.setHours(d.getHours()),e.setMinutes(d.getMinutes())),e},b.isValidDate=function(a){return"[object Date]"!==Object.prototype.toString.call(a)?!1:!isNaN(a.getTime())},b.setCurrentTime=function(a){b.currentTime="string"==typeof a?b.strToDateTime(a):b.isValidDate(a)?a:b.now(),zb.trigger(t)},b.empty=function(){b.currentTime=null},b.getCurrentTime=function(){return b.currentTime},b.nextMonth=function(){var c,d=b.currentTime.getMonth()+1;return 12===d&&(b.currentTime.setFullYear(b.currentTime.getFullYear()+1),d=0),c=b.currentTime.getFullYear(),b.currentTime.setDate(Math.min(new Date(b.currentTime.getFullYear(),d+1,0).getDate(),b.currentTime.getDate())),b.currentTime.setMonth(d),wb.onChangeMonth&&a.isFunction(wb.onChangeMonth)&&wb.onChangeMonth.call(zb,yb.currentTime,zb.data("input")),c!==b.currentTime.getFullYear()&&a.isFunction(wb.onChangeYear)&&wb.onChangeYear.call(zb,yb.currentTime,zb.data("input")),zb.trigger(t),d},b.prevMonth=function(){var c=b.currentTime.getMonth()-1;return-1===c&&(b.currentTime.setFullYear(b.currentTime.getFullYear()-1),c=11),b.currentTime.setDate(Math.min(new Date(b.currentTime.getFullYear(),c+1,0).getDate(),b.currentTime.getDate())),b.currentTime.setMonth(c),wb.onChangeMonth&&a.isFunction(wb.onChangeMonth)&&wb.onChangeMonth.call(zb,yb.currentTime,zb.data("input")),zb.trigger(t),c},b.getWeekOfYear=function(a){var b=new Date(a.getFullYear(),0,1);return Math.ceil(((a-b)/864e5+b.getDay()+1)/7)},b.strToDateTime=function(a){var c,d,e=[];return a&&a instanceof Date&&b.isValidDate(a)?a:(e=/^(\+|\-)(.*)$/.exec(a),e&&(e[2]=Date.parseDate(e[2],wb.formatDate)),e&&e[2]?(c=e[2].getTime()-6e4*e[2].getTimezoneOffset(),d=new Date(yb.now().getTime()+parseInt(e[1]+"1",10)*c)):d=a?Date.parseDate(a,wb.format):b.now(),b.isValidDate(d)||(d=b.now()),d)},b.strToDate=function(a){if(a&&a instanceof Date&&b.isValidDate(a))return a;var c=a?Date.parseDate(a,wb.formatDate):b.now(!0);return b.isValidDate(c)||(c=b.now(!0)),c},b.strtotime=function(a){if(a&&a instanceof Date&&b.isValidDate(a))return a;var c=a?Date.parseDate(a,wb.formatTime):b.now(!0);return b.isValidDate(c)||(c=b.now(!0)),c},b.str=function(){return b.currentTime.dateFormat(wb.format)},b.currentTime=this.now()},yb=new E,Cb.find("."+ib).on(n,function(){zb.data("changed",!0),yb.setCurrentTime(0),zb.trigger(e)}).on(j,function(){d.val(yb.str()),zb.trigger(i)}),Cb.find("."+Z+",."+V).on(n,function(){var b=a(this),c=0,d=!1;!function e(a){yb.currentTime.getMonth();b.hasClass(wb.next)?yb.nextMonth():b.hasClass(wb.prev)&&yb.prevMonth(),wb.monthChangeSpinner&&(d||(c=setTimeout(e,a||100)))}(500),a([document.body,window]).on(o,function f(){clearTimeout(c),d=!0,a([document.body,window]).off(o,f)})}),Eb.find("."+Z+",."+V).on(n,function(){var b=a(this),c=0,d=!1,e=110;!function f(a){var g=Fb[0].clientHeight,h=Gb[0].offsetHeight,i=Math.abs(parseInt(Gb.css("marginTop"),10));b.hasClass(wb.next)&&h-g-wb.timeHeightInTimePicker>=i?Gb.css("marginTop","-"+(i+wb.timeHeightInTimePicker)+"px"):b.hasClass(wb.prev)&&i-wb.timeHeightInTimePicker>=0&&Gb.css("marginTop","-"+(i-wb.timeHeightInTimePicker)+"px"),Fb.trigger(C,[Math.abs(parseInt(Gb.css("marginTop"),10)/(h-g))]),e=e>10?10:e-10,d||(c=setTimeout(f,a||e))}(500),a([document.body,window]).on(o,function g(){clearTimeout(c),d=!0,a([document.body,window]).off(o,g)})}),F=0,zb.on(t,function(c){clearTimeout(F),F=setTimeout(function(){for(var c,d,e,f,g,h,i,j="",k=new Date(yb.currentTime.getFullYear(),yb.currentTime.getMonth(),1,12,0,0),m=0,n=yb.now(),o=!1,p=!1,q=[],r=!0,s="",t="";k.getDay()!==wb.dayOfWeekStart;)k.setDate(k.getDate()-1);for(j+="<table><thead><tr>",wb.weeks&&(j+="<th></th>"),c=0;7>c;c+=1)j+="<th>"+qb(wb.lang,"dayOfWeek")[(c+wb.dayOfWeekStart)%7]+"</th>";for(j+="</tr></thead>",j+="<tbody>",wb.maxDate!==!1&&(o=yb.strToDate(wb.maxDate),o=new Date(o.getFullYear(),o.getMonth(),o.getDate(),23,59,59,999)),wb.minDate!==!1&&(p=yb.strToDate(wb.minDate),p=new Date(p.getFullYear(),p.getMonth(),p.getDate()));m<yb.currentTime.countDaysInMonth()||k.getDay()!==wb.dayOfWeekStart||yb.currentTime.getMonth()===k.getMonth();)q=[],m+=1,d=k.getDate(),e=k.getFullYear(),f=k.getMonth(),g=yb.getWeekOfYear(k),q.push(J),h=wb.beforeShowDay&&a.isFunction(wb.beforeShowDay.call)?wb.beforeShowDay.call(zb,k):null,o!==!1&&k>o||p!==!1&&p>k||h&&h[0]===!1?q.push(O):-1!==wb.disabledDates.indexOf(k.dateFormat(wb.formatDate))&&q.push(O),h&&""!==h[1]&&q.push(h[1]),yb.currentTime.getMonth()!==f&&q.push(Y),(wb.defaultSelect||zb.data("changed"))&&yb.currentTime.dateFormat(wb.formatDate)===k.dateFormat(wb.formatDate)&&q.push(I),n.dateFormat(wb.formatDate)===k.dateFormat(wb.formatDate)&&q.push(hb),(0===k.getDay()||6===k.getDay()||~wb.weekends.indexOf(k.dateFormat(wb.formatDate)))&&q.push(jb),wb.beforeShowDay&&a.isFunction(wb.beforeShowDay)&&q.push(wb.beforeShowDay(k)),r&&(j+="<tr>",r=!1,wb.weeks&&(j+="<th>"+g+"</th>")),j+='<td data-date="'+d+'" data-month="'+f+'" data-year="'+e+'" class="'+J+" "+N+k.getDay()+" "+q.join(" ")+'"><div>'+d+"</div></td>",k.getDay()===wb.dayOfWeekStartPrev&&(j+="</tr>",r=!0),k.setDate(d+1);if(j+="</tbody></table>",Db.html(j),Cb.find("."+R+" span").eq(0).text(qb(wb.lang,"months")[yb.currentTime.getMonth()]),Cb.find("."+R+" span").eq(1).text(yb.currentTime.getFullYear()),s="",t="",f="",i=function(a,b){var c=yb.now();c.setHours(a),a=parseInt(c.getHours(),10),c.setMinutes(b),b=parseInt(c.getMinutes(),10);var d=new Date(yb.currentTime);d.setHours(a),d.setMinutes(b),q=[],(wb.minDateTime!==!1&&wb.minDateTime>d||wb.maxTime!==!1&&yb.strtotime(wb.maxTime).getTime()<c.getTime()||wb.minTime!==!1&&yb.strtotime(wb.minTime).getTime()>c.getTime())&&q.push(O),(wb.initTime||wb.defaultSelect||zb.data("changed"))&&parseInt(yb.currentTime.getHours(),10)===parseInt(a,10)&&(wb.step>59||Math[wb.roundTime](yb.currentTime.getMinutes()/wb.step)*wb.step===parseInt(b,10))&&(wb.defaultSelect||zb.data("changed")?q.push(I):wb.initTime&&q.push(P)),parseInt(n.getHours(),10)===parseInt(a,10)&&parseInt(n.getMinutes(),10)===parseInt(b,10)&&q.push(hb),s+='<div class="'+db+" "+q.join(" ")+'" data-hour="'+a+'" data-minute="'+b+'">'+c.dateFormat(wb.formatTime)+"</div>"},wb.allowTimes&&a.isArray(wb.allowTimes)&&wb.allowTimes.length)for(m=0;m<wb.allowTimes.length;m+=1)t=yb.strtotime(wb.allowTimes[m]).getHours(),f=yb.strtotime(wb.allowTimes[m]).getMinutes(),i(t,f);else for(m=0,c=0;m<(wb.hours12?12:24);m+=1)for(c=0;60>c;c+=wb.step)t=(10>m?"0":"")+m,f=(10>c?"0":"")+c,i(t,f);for(Gb.html(s),b="",m=0,m=parseInt(wb.yearStart,10)+wb.yearOffset;m<=parseInt(wb.yearEnd,10)+wb.yearOffset;m+=1)b+='<div class="'+X+" "+(yb.currentTime.getFullYear()===m?I:"")+'" data-value="'+m+'">'+m+"</div>";for(Ib.children().eq(0).html(b),m=0,b="";11>=m;m+=1)b+='<div class="'+X+" "+(yb.currentTime.getMonth()===m?I:"")+'" data-value="'+m+'">'+qb(wb.lang,"months")[m]+"</div>";Hb.children().eq(0).html(b),a(zb).trigger(l)},10),c.stopPropagation()}).on(e,function(){if(wb.timepicker){var a,b,c,d;Gb.find("."+I).length?a="."+I:Gb.find("."+P).length&&(a="."+P),a?(b=Fb[0].clientHeight,c=Gb[0].offsetHeight,d=Gb.find(a).index()*wb.timeHeightInTimePicker+1,d>c-b&&(d=c-b),Fb.trigger(C,[parseInt(d,10)/(c-b)])):Fb.trigger(C,[0])}}),ub=0,Db.on(h,"td",function(b){b.stopPropagation(),ub+=1;var c=a(this),e=yb.currentTime;return(void 0===e||null===e)&&(yb.currentTime=yb.now(),e=yb.currentTime),c.hasClass(O)?!1:(e.setDate(1),e.setFullYear(c.data("year")),e.setMonth(c.data("month")),e.setDate(c.data("date")),zb.trigger(v,[e]),d.val(yb.str()),(ub>1||wb.closeOnDateSelect===!0||0===wb.closeOnDateSelect&&!wb.timepicker)&&!wb.inline&&zb.trigger(i),wb.onSelectDate&&a.isFunction(wb.onSelectDate)&&wb.onSelectDate.call(zb,yb.currentTime,zb.data("input"),b),zb.data("changed",!0),zb.trigger(t),zb.trigger(g),void setTimeout(function(){ub=0},200))}),Gb.on(h,"div",function(b){b.stopPropagation();var c=a(this),d=yb.currentTime;return(void 0===d||null===d)&&(yb.currentTime=yb.now(),d=yb.currentTime),c.hasClass(O)?!1:(d.setHours(c.data("hour")),d.setMinutes(c.data("minute")),zb.trigger(v,[d]),zb.data("input").val(yb.str()),wb.inline||zb.trigger(i),wb.onSelectTime&&a.isFunction(wb.onSelectTime)&&wb.onSelectTime.call(zb,yb.currentTime,zb.data("input"),b),zb.data("changed",!0),zb.trigger(t),void zb.trigger(g))}),Bb.on(p,function(a){return wb.scrollMonth?(a.deltaY<0?yb.nextMonth():yb.prevMonth(),!1):!0}),d.on(p,function(a){return wb.scrollInput?!wb.datepicker&&wb.timepicker?(vb=Gb.find("."+I).length?Gb.find("."+I).eq(0).index():0,vb+a.deltaY>=0&&vb+a.deltaY<Gb.children().length&&(vb+=a.deltaY),Gb.children().eq(vb).length&&Gb.children().eq(vb).trigger("mousedown"),!1):wb.datepicker&&!wb.timepicker?(Bb.trigger(a,[a.deltaY,a.deltaX,a.deltaY]),d.val&&d.val(yb.str()),zb.trigger(g),!1):void 0:!0}),zb.on(g,function(b){if(wb.onChangeDateTime&&a.isFunction(wb.onChangeDateTime)){var c=zb.data("input");wb.onChangeDateTime.call(zb,yb.currentTime,c,b),delete wb.value,c.trigger("change")}}).on(l,function(){wb.onGenerate&&a.isFunction(wb.onGenerate)&&wb.onGenerate.call(zb,yb.currentTime,zb.data("input")),Jb&&(zb.trigger(e),Jb=!1)}).on(h,function(a){a.stopPropagation()}),vb=0,xb=function(){var b=zb.data("input").offset(),c=b.top+zb.data("input")[0].offsetHeight-1,d=b.left,e="absolute";wb.fixed?(c-=a(window).scrollTop(),d-=a(window).scrollLeft(),e="fixed"):(c+zb[0].offsetHeight>a(window).height()+a(window).scrollTop()&&(c=b.top-zb[0].offsetHeight+1),0>c&&(c=0),d+zb[0].offsetWidth>a(window).width()&&(d=a(window).width()-zb[0].offsetWidth)),zb.css({left:d,top:c,position:e})},zb.on(q,function(b){var c=!0;wb.onShow&&a.isFunction(wb.onShow)&&(c=wb.onShow.call(zb,yb.currentTime,zb.data("input"),b)),c!==!1&&(zb.show(),xb(),a(window).off(r,xb).on(r,xb),wb.closeOnWithoutClick&&a([document.body,window]).on(n,function d(){zb.trigger(i),a([document.body,window]).off(n,d)}))}).on(i,function(b){var c=!0;Cb.find("."+S+",."+kb).find("."+bb).hide(),wb.onClose&&a.isFunction(wb.onClose)&&(c=wb.onClose.call(zb,yb.currentTime,zb.data("input"),b)),c===!1||wb.opened||wb.inline||zb.hide(),b.stopPropagation()}).on(s,function(){zb.trigger(zb.is(":visible")?i:q)}).data("input",d),Kb=0,Lb=0,zb.data(L,yb),zb.setOptions(wb),yb.setCurrentTime(w()),d.data(M,zb).on([q,k,n].join(" "),function(){d.is(":disabled")||d.data(M).is(":visible")&&wb.closeOnInputClick||(clearTimeout(Kb),Kb=setTimeout(function(){d.is(":disabled")||(Jb=!0,yb.setCurrentTime(w()),zb.trigger(q))},100))}).on(m,function(b){var c,d=(this.value,b.which);return-1!==[G].indexOf(d)&&wb.enterLikeTab?(c=a("input:visible,textarea:visible"),zb.trigger(i),c.eq(c.index(this)+1).focus(),!1):-1!==[fb].indexOf(d)?(zb.trigger(i),!0):void 0})},w=function(b){var d=b.data(M);d&&(d.data(L,null),d.remove(),b.data(M,null).off("."+c),a(window).off(r),a([window,document.body]).off(n),b.unmousewheel&&b.unmousewheel())},a(document).off([E,F].join(" ")).on(E,function(a){a.keyCode===B&&(tb=!0)}).on(F,function(a){a.keyCode===B&&(tb=!1)}),this.each(function(){var c=a(this).data(M);if(c){if("string"===a.type(b))switch(b){case"show":a(this).select().focus(),c.trigger(q);break;case"hide":c.trigger(i);break;case"toggle":c.trigger(s);break;case"destroy":w(a(this));break;case"reset":this.value=this.defaultValue,this.value&&c.data(L).isValidDate(Date.parseDate(this.value,wb.format))||c.data("changed",!1),c.data(L).setCurrentTime(this.value)}else c.setOptions(b);return 0}"string"!==a.type(b)&&(!wb.lazyInit||wb.open||wb.inline?d(a(this)):yb(a(this)))})},a.fn.datetimepicker.defaults=ub,a.fn.datetimepicker.setNamespace=tb});